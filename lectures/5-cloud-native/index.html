
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="description"/>
<link href="../../favicon.svg" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.1.5" name="generator"/>
<title>5. Cloud-native software development - Cloud Computing 2020</title>
<link href="../../assets/stylesheets/main.21aed14c.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.196e0c26.min.css" rel="stylesheet"/>
<link href="../../custom.css" rel="stylesheet"/>
<meta content="website" property="og:type">
<meta content="Cloud Computing 2020" name="title" property="og:title">
<meta content="Cloud Computing 2020" property="og:site_name ">
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="description" property="og:description">
<meta content="None" property="og:url"/>
<meta content="social.png" name="image" property="og:image"/>
<meta content="Janos Pasztor, Peter Wenzl, G√ºnther Pospischil" name="author"/>
<meta content="summary_large_image" name="twitter:card">
<meta content="Cloud Computing 2020 | Cloud Computing 2020" name="twitter:title"/>
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="twitter:description"/>
<meta content="social.png" name="twitter:image"/>
<meta content="2020-09-14" name="date"/>
</meta></meta></meta></meta></meta></head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#the_enemy_of_scalability_state">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Cloud Computing 2020" class="md-header-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Cloud Computing 2020
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              5. Cloud-native software development
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        About the course
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../">
        Lectures
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../exercises/">
        Exercises
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../glossary/">
        Glossary
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Cloud Computing 2020" class="md-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
    Cloud Computing 2020
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      About the course
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="About the course" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-1">
<span class="md-nav__icon md-icon"></span>
        About the course
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../grading/">
      Grading
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../projectwork/">
      Project work
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deadlines/">
      Deadlines
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../testing/">
      Testing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../help/">
      Getting help
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Lectures
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Lectures" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon"></span>
        Lectures
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../1-cloud-intro/">
      1. Introduction to the Cloud
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../2-iaas/">
      2. Infrastructure as a Service
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../3-xaas/">
      3. Beyond IaaS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../4-containers/">
      4. Containers
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        5. Cloud-native software development
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
      5. Cloud-native software development
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#the_enemy_of_scalability_state">
    The enemy of scalability: state
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the_twelve_factor_app">
    The Twelve Factor App
  </a>
<nav aria-label="The Twelve Factor App" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_codebase">
    1. Codebase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_dependencies">
    2. Dependencies
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_configuration">
    3. Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_backing_services">
    4. Backing services
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_the_build_process">
    5. The build process
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6_stateless_processes">
    6. Stateless processes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7_network_configuration">
    7. Network configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8_process_handling">
    8. Process handling
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9_disposability">
    9. Disposability
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10_developmentproduction_gap">
    10. Development/production gap
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11_logs">
    11. Logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12_tooling">
    12. Tooling
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring_and_metrics_collection">
    Monitoring and metrics collection
  </a>
<nav aria-label="Monitoring and metrics collection" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#periodic_checks">
    Periodic checks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#feature_tests">
    Feature tests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metrics_collection">
    Metrics collection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#log_collection">
    Log collection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboards">
    Dashboards
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#microservices">
    Microservices
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#service_meshes_frameworks_and_tools">
    Service meshes, Frameworks, and Tools
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Exercises
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Exercises" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/1-iaas/">
      1. IaaS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/2-terraform/">
      2. Terraform
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/3-containers/">
      3. Containers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/4-prometheus/">
      4. Prometheus
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/5-grafana/">
      5. Grafana
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/6-api-integration/">
      6. API integration
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Glossary
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Glossary" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon"></span>
        Glossary
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../glossary/">
      A-Z
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#the_enemy_of_scalability_state">
    The enemy of scalability: state
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the_twelve_factor_app">
    The Twelve Factor App
  </a>
<nav aria-label="The Twelve Factor App" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_codebase">
    1. Codebase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_dependencies">
    2. Dependencies
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_configuration">
    3. Configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_backing_services">
    4. Backing services
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_the_build_process">
    5. The build process
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6_stateless_processes">
    6. Stateless processes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7_network_configuration">
    7. Network configuration
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8_process_handling">
    8. Process handling
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9_disposability">
    9. Disposability
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10_developmentproduction_gap">
    10. Development/production gap
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11_logs">
    11. Logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12_tooling">
    12. Tooling
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring_and_metrics_collection">
    Monitoring and metrics collection
  </a>
<nav aria-label="Monitoring and metrics collection" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#periodic_checks">
    Periodic checks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#feature_tests">
    Feature tests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metrics_collection">
    Metrics collection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#log_collection">
    Log collection
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboards">
    Dashboards
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#microservices">
    Microservices
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#service_meshes_frameworks_and_tools">
    Service meshes, Frameworks, and Tools
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/fh-cloud-computing/website/edit/master/docs/lectures/5-cloud-native/index.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<div class="download"><a download href="index.pdf"><button>Download PDF üñ®Ô∏è</button></a>
<a href="fh-cloud-computing-lecture-5-cloud-native.pptx"><button>Download PPTX üíª</button></a>
<a href="fh-cloud-computing-lecture-5-cloud-native.mp3"><button>Download MP3 üéß</button></a>
<a href="https://youtu.be/QBajWUN-tAk"><button>Watch Video üé¨</button></a>
</div>
<h1>Cloud Native Software Development</h1>
<p><audio controls="" preload="none" src="audio/01-cloud-native.mp3"></audio></p>
<p>Software development doesn't exist in a vacuum. The software will need to run somewhere. While not every software needs to, or indeed will, scale to Google levels, a little forethought can go a long way towards surviving the first contact with the customer hordes.</p>
<h3 id="the_enemy_of_scalability_state">The enemy of scalability: state<a class="headerlink" href="#the_enemy_of_scalability_state" title="Permanent link">#</a></h3>
<p><audio controls="" preload="none" src="audio/02-state.mp3"></audio></p>
<p>Any application that does not store or access data is easy to scale. Simply run more copies of it and put a load balancer in front of it.</p>
<p>State can rear its ugly head in obvious, and in more subtle ways. The obvious point state is, for example, your database. When you have data in your database that's a form of state. You can run as many application servers as you want, if the database can't handle the load you're done. As we discussed in the <a href="../3-xaas/">third lecture</a> scaling databases can be quite tricky since the consistency model may not permit scaling.</p>
<p>A second point of contention is the ability to store data. Integrating an object storage instead of simply writing data to the disk will, again, help with scaling.</p>
<p>A more subtle point of contention may be the storage of sessions. Sessions are usually built by sending the user a session ID via a cookie and then storing a blob of data on the disk or in the database. The problem is not only the storage, but also that moving from a local filesystem to a database may <a href="https://pasztor.at/blog/stop-using-php-sessions/">create a race condition</a> that may present a security issue with your application.</p>
<p>A similar issue arises when near-realtime data exchange is desired between a large amount of users (e.g. a chat application). While a single server can scale to tens of thousands of users, that server is neither redundant, nor will it serve an endless number of users. <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">PubSub</a> systems can help with that.</p>
<h3 id="the_twelve_factor_app">The Twelve Factor App<a class="headerlink" href="#the_twelve_factor_app" title="Permanent link">#</a></h3>
<p><audio controls="" preload="none" src="audio/03-12-factor.mp3"></audio></p>
<p>Once we survive the first night after the launch of our application it often becomes time to deal with long-term architectural problems. The <a href="https://12factor.net/">12 factor app</a> is a concept that collects the current best practices of writing applications for the cloud. Keep in mind that these are just guidelines and you should never make a religious tirade out of following these guidelines. Instead, apply common sense and be pragmatic about what to do.</p>
<h4 id="1_codebase">1. Codebase<a class="headerlink" href="#1_codebase" title="Permanent link">#</a></h4>
<p>This <a href="https://12factor.net/codebase">first guideline</a> is pretty simple: keep your application in a version control system. While this should be the default in 2020, it unfortunately still bears saying.  </p>
<h4 id="2_dependencies">2. Dependencies<a class="headerlink" href="#2_dependencies" title="Permanent link">#</a></h4>
<p>This <a href="https://12factor.net/dependencies">recommendation</a> deals with dependencies. Almost every programming language ecosystem nowadays has a dependency manager to handle downloading dependencies. These dependencies should be declared explicitly in the configuration file for the dependency manager (e.g. <code>package.json</code>, <code>composer.json</code>, <code>pom.xml</code>, etc.)</p>
<p>Furthermore, these dependency managers often create a lock file (<code>npm-package-lock.json</code>, <code>composer.lock</code>, etc.). They record the exact versions, and sometimes hashes of the third party library. This ensures that the same exact version is installed in the development and production builds.</p>
<h4 id="3_configuration">3. Configuration<a class="headerlink" href="#3_configuration" title="Permanent link">#</a></h4>
<p>While in older times configuration files had many formats, modern, container-based applications distinctly move towards <a href="https://12factor.net/config">environment variables</a>. Environment variables are a cross-platform way to provide variables to an application and give a DevOps engineer a flexible way to configure a containerized application.</p>
<h4 id="4_backing_services">4. Backing services<a class="headerlink" href="#4_backing_services" title="Permanent link">#</a></h4>
<p>External databases, caches, etc. <a href="https://12factor.net/backing-services">should be treated as such</a>. This means that the connection options (server name, url, username, password, etc) should be configurable via environment variable and should also be replacable by a system administrator by simply reconfiguring the container.</p>
<p>Testing is also important with services that are not as well standardized as, for example, a MySQL database. For example, many S3 implementations only support Amazon's version and cannot be configured to use alternative providers. An application following this recommendation should be tested against at least one other S3 provider.</p>
<h4 id="5_the_build_process">5. The build process<a class="headerlink" href="#5_the_build_process" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/build-release-run">build recommendation</a> says that the build process should be separated from the runtime configuration and the release process. In practice this means that you don't bake your configuration into your container. It also means that each release should have a version number or date, allowing you to roll back to a specific version.</p>
<h4 id="6_stateless_processes">6. Stateless processes<a class="headerlink" href="#6_stateless_processes" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/processes">processes recommendation</a> says that your application should run as a single program without any shared data between different copies of your application. Any state should be outsourced to an external database or system as mentioned before.</p>
<h4 id="7_network_configuration">7. Network configuration<a class="headerlink" href="#7_network_configuration" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/port-binding">port binding recommendation</a> says that an application is standalone and does not require an external webserver to run. (Typically PHP applications require a bit of legwork to satisfy this requirement.)</p>
<h4 id="8_process_handling">8. Process handling<a class="headerlink" href="#8_process_handling" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/concurrency">concurrency recommendation</a> defines a number of rules for process handling. It requires that it should be possible to run multiple copies of the application, optionally across several machines. It also requires that the application should not <a href="https://en.wikipedia.org/wiki/Daemon_(computing)">daemonize</a>.</p>
<p>While this may seem as trivial with a green field project, it is definitely a challenge for legacy application.</p>
<h4 id="9_disposability">9. Disposability<a class="headerlink" href="#9_disposability" title="Permanent link">#</a></h4>
<p>This <a href="https://12factor.net/disposability">recommendation</a> states that an application should have a fast startup and should also shut down quickly when receiving the <code>TERM</code> signal. Applications should also be able to recover from unexpected crashes.</p>
<h4 id="10_developmentproduction_gap">10. Development/production gap<a class="headerlink" href="#10_developmentproduction_gap" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/dev-prod-parity">dev/prod parity</a> recommendation postulates that developers of apps should strive to have a continuous method of deployment that allows for rapid rollout of updates. This lowers the work a developer needs to go through to deploy and therefore promotes smaller change sets.</p>
<p>Smaller change sets make tracking down issues with deployments easier, but can be impractical when working with larger, slower moving clients. (e.g. banks, telcos, etc.)</p>
<h4 id="11_logs">11. Logs<a class="headerlink" href="#11_logs" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/logs">logs recommendation</a> states that an app should simply write logs to the standard output in a standardized form (e.g. JSON). Everything else, like routing or storing logs, is not the applications concern.</p>
<p>In practice each application contains at least some basic logic to filter logs to make it easier to configure the logging level.</p>
<h4 id="12_tooling">12. Tooling<a class="headerlink" href="#12_tooling" title="Permanent link">#</a></h4>
<p>The <a href="https://12factor.net/admin-processes">admin process recommendation</a> concerns itself with the command line tools needed to operate the application. These are things like running database migrations, etc. The recommendation says that these tools should be runnable directly from the applications directory without much extra configuration or installation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>These factors are, of course, not exhaustive. IBM has published a whole host of <a href="https://medium.com/ibm-cloud/7-missing-factors-from-12-factor-application-2a3e1169bd9d">additional factors</a>.</p>
</div>
<h3 id="monitoring_and_metrics_collection">Monitoring and metrics collection<a class="headerlink" href="#monitoring_and_metrics_collection" title="Permanent link">#</a></h3>
<p><audio controls="" preload="none" src="audio/04-monitoring.mp3"></audio></p>
<p>The above 12 factors are, by necessity, limited in scope. The author(s) of those 12 factors have taken many things into account, yet left out others.</p>
<p>One of the most important aspects left out of the list above is monitoring. Any developer wanting to working a cloud-native environment needs to consider monitoring. After all, the journey to the cloud is supposed to bring greater stability and facilitate rapid development cycles.</p>
<p>In this section we will discuss the monitoring types and their practical implementation.</p>
<h4 id="periodic_checks">Periodic checks<a class="headerlink" href="#periodic_checks" title="Permanent link">#</a></h4>
<p><audio controls="" preload="none" src="audio/05-periodic-checks.mp3"></audio></p>
<p>One of the most classic forms of monitoring are periodic checks. Periodic checks run a certain check, for example a connection, against the application. If the connection succeeds the check is green, if not the check is red and an alert is sent out. The check types are varied, ranging from a simple connection attempt to a fully blown interaction with the application.</p>
<p>These checks not only serve the purpose of alerting the administrator but can also work as a trigger for a self-healing system. In a containerized environment, for example, we have several options to implement a self-healing system. You can add the <a href="https://docs.docker.com/engine/reference/builder/#healthcheck"><code>HEALTHCHECK</code></a> directive in the <code>Dockerfile</code> for example, or you can implement <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/">Liveness, Readiness, and Startup Probles</a> in Kubernetes.</p>
<p>The important question to consider with periodic checks is the rate of false positives. An intermittent network failure may not be a signal for an application failing and can still raise alarms. In order to avoid <a href="https://www.pagerduty.com/blog/lets-talk-about-alert-fatigue/">alert fatigue</a> a well designed monitoring system keeps false alerts to a minimum.</p>
<h4 id="feature_tests">Feature tests<a class="headerlink" href="#feature_tests" title="Permanent link">#</a></h4>
<p><audio controls="" preload="none" src="audio/06-feature-tests.mp3"></audio></p>
<p>A very special case of periodic checks are full-on feature tests. These feature tests blur the boundaries between development-time software testing and operations. The intention is to run a full application test, such as with the <a href="https://www.selenium.dev/">Selenium</a> test suite, against a production application. This test could test a full signup, for example. This level of testing ensures that the application keeps working even after deployment.</p>
<p>While not practical in every scenario these tests can ensure a high level of certainty and can also function as a regression test when the infrastructure changes rather than the application.</p>
<h4 id="metrics_collection">Metrics collection<a class="headerlink" href="#metrics_collection" title="Permanent link">#</a></h4>
<p><audio controls="" preload="none" src="audio/07-metrics.mp3"></audio></p>
<p>Another important aspect of monitoring is metrics collection. Periodic checks can only check what's there, but they cannot indicate a brewing trouble before it happens. Metrics can be an early warning system for a failure in the application. For example, a software rollout can significantly impact signups. While the change may have been entirely intentional it is business critical to observe this happening and alert immediately to a potential defect in the software. Are the loading times too long? Did the layout change make the process too confusing? Metrics can help. </p>
<p>As you will learn in the <a href="../../exercises/4-prometheus/">Prometheus exercise</a>, <a href="https://prometheus.io/">Prometheus</a> has established itself as a defacto standard for monitoring cloud-native applications. Prometheus makes it exceedingly easy to integrate metrics collection with just about any application. It is not uncommon to see applications include a small webserver that exposes internal metrics <a href="https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md">in the Prometheus data format</a>. Prometheus then collects these metrics and provides alerting and query services.</p>
<p>The reason why Prometheus has established itself as a standard is its ability to monitor a dynamic number of machines. It first queries the the cloud provider for a list of IP addresses and then queries those IPs for the metrics. As machines are started and stopped Prometheus always keeps track of them.</p>
<h4 id="log_collection">Log collection<a class="headerlink" href="#log_collection" title="Permanent link">#</a></h4>
<p><audio controls="" preload="none" src="audio/08-logs.mp3"></audio></p>
<p>Depending on how well written the application is it may expose more or less useful logs. One thing is certain: error counts can also be an early warning system for latent defects. For example, your access log may contain the individual entries of failed requests. A log aggregation system such as the <a href="https://www.elastic.co/what-is/elk-stack">ELK stack</a> can discover patterns in your logs and give you alerts when something is going south. </p>
<h4 id="dashboards">Dashboards<a class="headerlink" href="#dashboards" title="Permanent link">#</a></h4>
<p><audio controls="" preload="none" src="audio/09-dashboards.mp3"></audio></p>
<p>No monitoring system is complete without a way to look at what's going on. This niche is filled by dashboards such as <a href="https://grafana.com/">Grafana</a> which we will discuss in greater detail in <a href="/exercises/5-grafana">exercise 5</a>.</p>
<h3 id="microservices">Microservices<a class="headerlink" href="#microservices" title="Permanent link">#</a></h3>
<p><audio controls="" preload="none" src="audio/10-microservices.mp3"></audio></p>
<p>The proliferation of containers has brought about a change in software design as well: microservices. Microservices is a concept where, instead of building one monolithic application one builds a tiny service for each need. These services are connected across the network, usually via HTTP.</p>
<p>On its face this solves the problem of creating an incoherent giant ball of code with bad code quality. However, experience has shown that this is not true. <strong>A team or company that is not able to write a good quality monolith is also not able to design and maintain microservices properly.</strong></p>
<p>To write a well designed system, no matter if microservices or monolith, one needs to have clean API boundaries between the different parts of the system. Unfortunately, there is no simple way to achieve clean boundaries as there is a host of literature on Clean Code that would exceed the bounds of this course.</p>
<p>Where's the difference microservices and a monolith? For one, it's the <em>network</em>. When you write a monolith you can rely on every call across API boundaries to always, reliably return. With microservices, this is not true. Microservices calls can hang indefinitely. It is possible that the other service simply disappears from the network and you won't even know it. That's why a microservices architecture always needs to include the <a href="https://martinfowler.com/bliki/CircuitBreaker.html">Circuit Breaker pattern</a></p>
<p>Second, it's the runtime. If there are several microservices calling each other, each service being <em>reasonably</em> fast, the run time can still add up. Imagine 5 microservices calling each other, each with a maximum runtime of 200ms. That's a one second response time right there!</p>
<p>Third, it's the API design. If you break your API in a monolithic application chances are your compiler will bark at you and refuse to compile the code. If you break compatibility across microservices possibly nothing happens. With badly written microservices that ignore missing parameters, for example, systems can break in a really horrifying manner.</p>
<p>Microservices make sense, and indeed follow Conway's Law:</p>
<blockquote>
<p>Any organization that designs a system (defined broadly) will produce a design whose structure is a copy of the organization's communication structure.
‚Äî‚ÄâMelvin E. Conway</p>
</blockquote>
<p>Conway formulated this in 1968, long before microservices. It still holds true today: microservices in an organization will always follow the team or company structure. For example, there may be several development teams that enjoy the ability to develop and deploy their application parts independently from each other. Or, there may be one <em>development</em> team that needs to gather information from several source systems from different departments.</p>
<p>Microservices are also a good idea where boundaries are needed between applications with different technology stacks (e.g. to pass information from Java to Javascript, etc.)</p>
<p>However, it makes very little sense for a small development team in a startup, using a homogeneous technology stack to use microservices. Chances are, this team will be violating API boundaries all over the place and disregard the requirements for building a network-based distributed system.</p>
<div class="admonition tip">
<p class="admonition-title">Ask the Authors</p>
<p>If you want a fun story about how microservices can go horribly wrong, ask the authors in the consulting sessions.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Be careful!</p>
<p>It is easy to go over-board with microservices to the point where you have more Kubernetes manifests than actual program code! Don't forget, you not only have to write them, but also deploy them. If you go for services that are too small, or your team is ill-equipped to handle a large number of tiny services in production, you may have one of the many horrible microservices failures on your hand.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Loosely typed languages</p>
<p>Be careful with loosely typed languages and systems like JavaScript! These systems are very tolerant towards missing parameters, or parameters with incorrect types. This can lead to some disastrous consequences.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Further reading</p>
<p>While we will not be asking any of the following materials in the test we strongly recommend that you take them as a starting point for your further studies:</p>
<ul>
<li>Clean code<ul>
<li><a href="https://en.wikipedia.org/wiki/SOLID">S.O.L.I.D. principles</a></li>
<li><a href="https://pasztor.at/blog/oop-basics/">Getting started in Object-Oriented Programming</a></li>
<li><a href="https://pasztor.at/blog/oop-misunderstandings/">What people misunderstand about OOP</a></li>
<li><a href="https://pasztor.at/blog/what-is-the-ioc-container/">What the ** is an IoC container?</a></li>
<li><a href="https://www.youtube.com/watch?v=wEhu57pih5w">The clean code talks: Unit Testing</a></li>
<li><a href="https://www.youtube.com/watch?v=acjvKJiOvXw">The clean code talks: OO Design for Testability</a></li>
<li><a href="https://www.youtube.com/watch?v=RlfLCWKxHJ0">The clean code talks: Don't look for things!</a></li>
<li><a href="https://www.youtube.com/watch?v=aAb7hSCtvGw">How to design a good API and why it matters</a></li>
</ul>
</li>
<li>Microservices<ul>
<li><a href="https://www.youtube.com/watch?v=PFQnNFe27kU">Principles of Microservices</a></li>
<li><a href="https://www.infoworld.com/article/3254777/3-common-pitfalls-of-microservices-integrationand-how-to-avoid-them.html">3 common pitfalls of microservices integration</a></li>
<li><a href="https://www.youtube.com/watch?v=gfh-VCTwMw8">Avoiding Microservice Megadisasters</a></li>
</ul>
</li>
<li>Distributed systems<ul>
<li><a href="https://www.youtube.com/watch?v=Y6Ev8GIlbxc">Distributed Systems in One Lesson</a></li>
</ul>
</li>
</ul>
</div>
<div class="admonition question"><p class="admonition-title">What is the Circuit-Breaker Pattern?</p><div class="quiz__answers"><div class="quiz__answer"><input id="248d441a-0a93-4d80-9cdf-e5876d9e2b58" type="checkbox"><label for="248d441a-0a93-4d80-9cdf-e5876d9e2b58"> It ensures there are no loops when microservices call each other</label></input></div><div class="quiz__answer"><input id="1f922979-02c2-4932-a32a-2848435deee6" type="checkbox"><label for="1f922979-02c2-4932-a32a-2848435deee6"> It cancels API calls to other services if they take too long</label></input></div></div></div>
<h3 id="service_meshes_frameworks_and_tools">Service meshes, Frameworks, and Tools<a class="headerlink" href="#service_meshes_frameworks_and_tools" title="Permanent link">#</a></h3>
<p><audio controls="" preload="none" src="audio/11-service-mesh.mp3"></audio></p>
<p>Service meshes are a tool to help with building microservices. As mentioned before, microservices are hard. Not only do you have to take the network into account, not only do you have to make the API work together across many different components, you also have to make sure that components find each other.</p>
<p>Kubernetes makes sure that there are internal load balancers for each service allowing you to do a basic rollout. However, Kubernetes does not retry failed calls, allow for versioning, implement a circuit breaker, etc.</p>
<p>Service meshes like <a href="https://istio.io/">Istio</a> do that. You don't strictly <em>need</em> a service mesh to build microservices, but they make the process easier. This is especially true if you run applications developed by different teams with different tooling, where implementing a common service registration would be hard. We recommend watching <a href="https://www.youtube.com/watch?v=6BYq6hNhceI">Building cloud-native applications with Kubernetes and Istio, by Kelsey Hightower</a> for more details on how Istio works.</p>
<p>Alternatively, you can of course use the tools afforded by your framework. If you are in the Java world, you could use <a href="https://spring.io/projects/spring-cloud">Spring Cloud</a>, for example. Spring Cloud will let you register your services with a wide variety of backend services.</p>
<p>However, keep in mind: microservices are hard. As a developer you will be curious and willing to learn about them, of course. But, your curiosity may not serve the company's interest as much as you may think it does.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../4-containers/" rel="prev">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                4. Containers
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../../exercises/" rel="next">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright ¬© 2020 Janos Pasztor, Peter Wenzl, G√ºnther Pospischil
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.7e0ee788.min.js"></script>
<script src="../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
<script src="../../player.js"></script>
<script src="../../external.js"></script>
<script src="../../download.js"></script>
</body>
</html>