
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../favicon.svg" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.4.0" name="generator"/>
<title>3. Infrastructure as a Service - Cloud Computing 2020</title>
<link href="../../assets/stylesheets/main.fe0cca5b.min.css" rel="stylesheet"/>
<link href="../../custom.css" rel="stylesheet"/>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#virtual_machines">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Cloud Computing 2020" class="md-header-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Cloud Computing 2020
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              3. Infrastructure as a Service
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          About the course
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../">
          Lectures
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../exercises/">
          Exercises
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../glossary/">
          Glossary
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Cloud Computing 2020" class="md-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
    Cloud Computing 2020
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      About the course
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="About the course" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-1">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        About the course
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../grading/" title="Grading">
      Grading
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../projectwork/" title="Project work">
      Project work
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deadlines/" title="Deadlines">
      Deadlines
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../testing/" title="Testing">
      Testing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../help/" title="Getting help">
      Getting help
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Lectures
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Lectures" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Lectures
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../1-cloud-intro/" title="1. Introduction to the Cloud">
      1. Introduction to the Cloud
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../2-capabilities/" title="2. Cloud capabilities">
      2. Cloud capabilities
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        3. Infrastructure as a Service
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="3. Infrastructure as a Service">
      3. Infrastructure as a Service
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual_machines">
    Virtual machines
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#typical_instance_types">
    Typical instance types
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automation">
    Automation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual_machine_pools">
    Virtual machine pools
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage">
    Storage
  </a>
<nav aria-label="Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local_storage">
    Local Storage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_block_storage">
    Network Block Storage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_file_systems">
    Network File Systems
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#object_storage">
    Object storage
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network">
    Network
  </a>
<nav aria-label="Network" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#how_cloud_networks_are_built">
    How cloud networks are built
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#underlying_network_architectures_offered_by_cloud_providers">
    Underlying network architectures offered by cloud providers
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#firewalling">
    Firewalling
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_load_balancers">
    Network load balancers
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vpns_private_interconnects_and_routing_services">
    VPNs, private interconnects, and routing services
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dns">
    DNS
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring">
    Monitoring
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automation_1">
    Automation
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../4-xaas/" title="4. Beyond IaaS: PaaS, SaaS">
      4. Beyond IaaS: PaaS, SaaS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../5-cloud-native/" title="5. Cloud-native software development">
      5. Cloud-native software development
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Exercises
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Exercises" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Exercises
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../exercises/1-iaas/" title="1. IaaS">
      1. IaaS
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Glossary
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Glossary" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Glossary
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../glossary/" title="A-Z">
      A-Z
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual_machines">
    Virtual machines
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#typical_instance_types">
    Typical instance types
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automation">
    Automation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#virtual_machine_pools">
    Virtual machine pools
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage">
    Storage
  </a>
<nav aria-label="Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local_storage">
    Local Storage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_block_storage">
    Network Block Storage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_file_systems">
    Network File Systems
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#object_storage">
    Object storage
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network">
    Network
  </a>
<nav aria-label="Network" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#how_cloud_networks_are_built">
    How cloud networks are built
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#underlying_network_architectures_offered_by_cloud_providers">
    Underlying network architectures offered by cloud providers
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#firewalling">
    Firewalling
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#network_load_balancers">
    Network load balancers
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vpns_private_interconnects_and_routing_services">
    VPNs, private interconnects, and routing services
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dns">
    DNS
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring">
    Monitoring
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automation_1">
    Automation
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/fh-cloud-computing/website/edit/master/docs/lectures/3-iaas/index.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<div class="download"><a download href="index.pdf"><button>Download PDF 🖨️</button></a>
<a href="fh-cloud-computing-lecture-3-iaas.pptx"><button>Download PPTX 💻</button></a>
<a href="fh-cloud-computing-lecture-3-iaas.mp3"><button>Download MP3 🎧</button></a>
<a href="fh-cloud-computing-lecture-3-iaas.m4b"><button>Download M4B 🎧</button></a>
<a href="#"><button>Watch Video 🎬</button></a>
</div>
<h1>Infrastructure as a Service</h1>
<p>Infrastructure as a Service, or IaaS is a service offering by most cloud providers that provides <em>virtual machines</em>
and the accompanying infrastructure as a service. This lecture will discuss the details of how an IaaS service is
built.</p>
<h3 id="virtual_machines">Virtual machines<a class="headerlink" href="#virtual_machines" title="Permanent link">#</a></h3>
<p>Virtualization is a surprisingly old technology. The first virtualized system was the IBM System/370 mainframe with the
VM/370 operating system in 1972. The system was different from how we understand virtualization today, but the goal was
the same: separate workloads from each other.</p>
<p>When you think about mainframes you have to consider that these machines were <em>very</em> expensive and machine time was 
a scarce resource. Most programs back in those days were <em>batch jobs</em>. They processed a large set of data at once and
then terminated.</p>
<p>Initially CPUs in personal computers did not have application separation. The x86 line of Intel CPUs only received 
the <em>protected mode</em> feature with the 80286 in 1982. The operating system (MS/DOS) would run in in <em>real mode</em> and 
applications could then switch into the new mode to isolate applications from each other. One such application making
use of the new mode was Windows that ran on top of MS/DOS.</p>
<p>Protected mode introduced the concept of <em>rings</em> in the CPU. The operating system <em>kernel</em> would run in ring 0,
device drivers would run in ring 1 and 2 while applications would run in ring 3. The lower ring number meant the higher
privilege level.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Device drivers today typically run on ring 0 instead of 1 or 2.</p>
</div>
<p>This ring system allowed the operating system to restrict the higher ring numbers from accessing certain functions or
memory locations. However, most applications in the day would violate the restrictions of protected mode and could not
run in the new mode.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you try and set up a really old computer game like <a href="https://en.wikipedia.org/wiki/Commander_Keen">Commander Keen</a>
in <a href="https://www.dosbox.com/">DOSBox</a> you will realize that you have to provide the game itself with very
hardware-specific settings. You will, for example, have to provide details for your sound card. This is because the
game itself incorporated sound card drivers for Sound Blaster 16 or Gravis Ultrasound cards. A game that would do
this could not run in protected mode.</p>
</div>
<p>To work around the problems with protected mode the 80386 successor introduced
<a href="https://en.wikipedia.org/wiki/Virtual_8086_mode">virtual mode</a>. The new virtual 8086 mode (VM86) introduced a number of
compatibility fixes to enable running old real mode programs in a multitasking environment such as Windows without
problems.</p>
<p>For instance the CPU would create a simulated <em>virtual</em> memory space the program could write to and translate the
virtual addresses to physical addresses internally. It would also capture sensitive instructions and turn them over for
control to the kernel.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>VM86 does not capture <em>every</em> instruction the application runs in virtual mode, only the sensitive CPU instructions.
This enables legacy applications to run at a reasonable speed.</p>
</div>
<p>In the mid 2000's CPUs became so powerful that it made sense to not only virtualize applications but whole operating
systems including their kernel. This allowed multiple operating systems to run in parallel. However, without CPU support
only <em>software virtualization</em> could be achieved. In other words early virtualization software had to <em>simulate</em> a CPU
in ring 0 to the guest operating system. Some virtualization techniques, such as <a href="https://xenproject.org/">Xen</a> required
the guest operating system to run a modified kernel to facilitate them running in ring 3. Others employed
<a href="https://en.wikipedia.org/wiki/X86_virtualization#Software-based_virtualization">a number of techniques</a> we won't go
into here.</p>
<p>While initially expensive hardware support followed suit. In 2005 Intel added the VT-x (Vanderpool) feature to its new
Pentium 4 CPUs followed by AMDs SVM/AMD-V technology in 2006 in the Athlon 64, Athlon 64 X2, and Athlon 64 FX
processors.</p>
<p>VT-x and AMD-V added new ring -1 to accommodate <em>hypervisors</em>. This new ring allowed for separation between
several operating systems running at ring 0. Later CPU releases added features such as
<a href="https://software.intel.com/content/www/us/en/develop/articles/intel-virtualization-technology-for-directed-io-vt-d-enhancing-intel-platforms-for-efficient-virtualization-of-io-devices.html">Direct Input/Output virtualization</a>,
network virtualization or even graphics card virtualization. These features allowed for more efficient
virtualization and sharing hardware devices between several virtual machines.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Intel also introduced a ring -2 for the Intel Management Engine, a chip that functions as an OOBM in modern Intel
chips. The ME runs its own operating system, a <a href="https://en.wikipedia.org/wiki/MINIX">MINIX</a> variant and has been
the target of severe criticism for its secrecy and power over the machine. Several bugs have been found in the ME
that let an attacker hide a malware inside the ME.</p>
</div>
<p>Virtualization also gave rise to Infrastructure as a Service. <a href="https://aws.amazon.com/">AWS</a> was the first service
that offered virtual machines as a service starting in 2006 with a Xen-based offer. They not only offered virtual
machines but they did so that a customer could order or cancel the service using an Application Program Interface.</p>
<p>This allowed customers to create virtual machines as they needed it and they were billed for it on an hourly basis.
(Later on AWS and other cloud providers moved to a per-second billing.)</p>
<p>The presence of an API makes the difference between IaaS and plain old virtual machines as a service. IaaS allows
a customer to scale their application dynamically according to their current demand.</p>
<h3 id="typical_instance_types">Typical instance types<a class="headerlink" href="#typical_instance_types" title="Permanent link">#</a></h3>
<p>When the cloud became popular in the late 2000s several providers attempted to offer a service that was fully dynamic
in their sizes. The customer could set how many GB of RAM they needed and how many CPU cores. However, this model has
been phased out by most providers since it is difficult to manage such a dynamic environment.</p>
<p>Instead cloud providers nowadays opt to offer fixed machine sizes (think of t-shirt sizes). To accommodate high-CPU
and high RAM workloads there are several different instance types, typically:</p>
<ul>
<li><strong>Shared CPU:</strong> These are small instances where a single CPU core is shared between multiple virtual
  machines, sometimes leading to high <a href="https://opensource.com/article/20/1/cpu-steal-time">steal time</a>. Sometimes
  this offering includes a <em>burst</em> capability (such as the Amazon T instances) where a VM can temporarily use more
  CPU.</li>
<li><strong>Standard, dedicated core CPU:</strong> These instance types receive one or more physical cores leading to a more stable
  performance without the ability to burst beyond their limits.</li>
<li><strong>High CPU:</strong> These instance types are usually hosted on physical servers that have a very high CPU to RAM ratio.
  Accordingly, the virtual machine offering includes more CPU than the standard offering.</li>
<li><strong>High RAM:</strong> This offering is the exact opposite of the high CPU offering. The machines on offer here include more
  RAM with very little CPU.</li>
<li><strong>Storage:</strong> These instance types contain large amounts of local storage (see below in the storage section).</li>
<li><strong>Hardware-specific:</strong> These instance types offer access to dedicated hardware such as graphics cards (GPUs) or 
  FPGAs. </li>
</ul>
<h3 id="automation">Automation<a class="headerlink" href="#automation" title="Permanent link">#</a></h3>
<p>As discussed before, that makes an IaaS cloud provider a cloud provider is the fact that they offer an API to automate
the provisioning and deprovisioning of virtual machines as needed. However, that's not all. Simply starting a virtual
machine is not enough, the software needs to be installed in it.</p>
<p>Initially this problem would be solved by creating <em>templates</em> for the operating system that launches. In larger cloud
setups these templates included a pre-installed agent for configuration management that would report to a central
service and fetch its manifest of software to install.</p>
<p>Thankfully in the last decade a lot has happened and <a href="https://cloudinit.readthedocs.io/en/latest/">Cloud Init</a> has
established itself as a defacto standard in the IaaS world. Every cloud provider nowadays offers the ability to submit
a <em>user data</em> field when creating a virtual machine. This user data file is read by Cloud Init (or its Windows
alternative <a href="https://cloudbase.it/cloudbase-init/">Cloudbase Init</a>) and is executed at the first start of the virtual
machine.</p>
<p>A DevOps engineer can simply inject a script that runs at the first start that takes care of all the installation 
steps required.</p>
<p>Tools like <a href="https://terraform.io/">Terraform</a> or <a href="https://www.ansible.com/">Ansible</a> assist with managing the whole 
process of provisioning the virtual machines and supplying it with the correct user data script. </p>
<h3 id="virtual_machine_pools">Virtual machine pools<a class="headerlink" href="#virtual_machine_pools" title="Permanent link">#</a></h3>
<p>One other use of user data are virtual machine pools. Each cloud provider adopts a different name for them, ranging from
instance pools to autoscaling groups. The concept is the same everywhere: you supply the cloud with a configuration
how you would like your virtual machines to look like and the cloud will take care that the given number of machines
are always running. If a machine crashes or fails a health check the cloud deletes the machine and creates a new one.</p>
<p>The number of machines in a pool can, of course, be changed either manually or in some cases automatically using 
rules for automatic scaling.</p>
<p>Combined with the aforementioned user data this can be a very powerful tool to create a dynamically sized pool of
machines and is the prime choice for creating a scalable architecture.</p>
<p>These pools are often integrated with the various load-balancer offerings cloud providers have in their portfolio to
direct traffic to the dynamic number of instances. Some cloud providers integrate them with their Functions as a Service
offering as well allowing you to run a custom function whenever a machine starts or stops. This can be used to, for
example, update your own service discovery database.</p>
<h3 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">#</a></h3>
<p>When it comes to data storage virtual machines work exactly like your physical machine would: there is a physical disk
(or multiple) that store the files. The difference is that in the cloud your virtual machine may make use of a 
distributed storage architecture instead of using a local disk. In a distributed storage system the data isn't stored
on the machine that runs the virtual machine so a hardware failure on that machine will not cause a data loss.</p>
<p>However, a distributed storage system is generally either slower or more expensive for the same performance by several
magnitudes so using a local storage may still be needed for some use cases.</p>
<p>When we talk about storage systems we are talking about two types: block devices and filesystems. On they physical
disk data is stored in its raw form so the disk itself has no information about which data belongs to which file.
Filesystems organize data into <em>blocks</em> of a fixed or dynamic size and then create a database (mapping table) of 
which file entry consists of which blocks of data. Keep in mind that the blocks of a single file may be distributed
all over the whole disk randomly so that's something the filesystem must keep track of.</p>
<p>Therefore we traditionally call raw disk devices <em>block devices</em>. Block devices are (with very few exceptions) only
accessible from a single virtual or physical machine since otherwise the machines would have to synchronize their file
system operations on that device. The only notable exception is <a href="https://en.wikipedia.org/wiki/GFS2">GFS2</a>. While you
can use GFS2 over a shared storage infrastructure if you have control over it cloud providers enforce a single-VM access
policy. In other words, one block storage device can only ever be used by a single VM. </p>
<h4 id="local_storage">Local Storage<a class="headerlink" href="#local_storage" title="Permanent link">#</a></h4>
<p>As described above the simplest and most widely supported option to store data from your virtual machine is a disk that
is locally attached to the physical machine running the VM. This option offers you the highest performance at a
relatively low price point. The reason for that is that it is the simplest and cheapest to build.</p>
<p>Some cloud providers offer disk redundancy (<a href="https://en.wikipedia.org/wiki/RAID">RAID</a>) while others don't. At any rate
a hardware failure on they physical machine means that your data may become unavailable for a period of time or may be
completely lost.</p>
<p>It is therefore very advisable to solve redundancy on top of the virtual machine, e.g. by building a replicated database
setup. If, however, your database is replicated anyway you may no longer need the more expensive storage options and 
this can be a great way to save costs. </p>
<h4 id="network_block_storage">Network Block Storage<a class="headerlink" href="#network_block_storage" title="Permanent link">#</a></h4>
<p>Network block storage means a block storage that is delivered over the network. The network here can mean a traditional
IP network or a dedicated <a href="https://en.wikipedia.org/wiki/Fibre_Channel_Protocol">Fibre Channel</a> infrastructure.</p>
<p>As described before block storage is, in general, single-VM only. You can't access the files stored on a block storage
device from multiple virtual machines.</p>
<p>Also note that Network Block Storage does not automatically come with redundancy. Some solutions, such as 
<a href="https://en.wikipedia.org/wiki/ISCSI">iSCSI</a> simply offer the disk of one machine to another. More advanced ones like
<a href="https://docs.ceph.com/docs/master/rbd/">Ceph RBD</a> or the cloud provider offerings such as
<a href="https://aws.amazon.com/ebs/">EBS by Amazon</a>, however, do offer redundancy.</p>
<p>At any rate, using Network Block Storage does not absolve you from the duty to make backups and have a documented and
tested disaster recovery strategy.</p>
<h4 id="network_file_systems">Network File Systems<a class="headerlink" href="#network_file_systems" title="Permanent link">#</a></h4>
<p>In contrast to network block storage network file systems offer access to data not on a block level, but on a file
level. Over the various network file system protocols machines using these file systems can open, read and write files,
and even place locks on them.</p>
<p>The filesystem has to keep track of which machine has which file open, or has locks on which file. When machine edit
the same file in parallel the filesystem has to ensure that these writes are consistent. This means that network
file systems are either much slower than block-level access (e.g.
<a href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a>) or require a great deal more CPU and RAM to keep track of
the changes across the network (e.g. <a href="https://docs.ceph.com/docs/master/cephfs/">CephFS</a>).</p>
<h4 id="object_storage">Object storage<a class="headerlink" href="#object_storage" title="Permanent link">#</a></h4>
<p>Object storage systems are similar to network file systems in that they deal with files rather than blocks. However,
they do not have the same synchronization capabilities as network file systems. Files can generally only be read 
or written as a whole and they also don't have the ability to lock a file.</p>
<p>While object storages technically <em>can</em> be used as a filesystem on an operating system level for example by using
<a href="https://github.com/s3fs-fuse/s3fs-fuse">s3fs</a> this is almost always a bad idea due to the exceptionally bad performance
and stability issues.</p>
<p>Operating system level integration should only be used as a last resort and object storages should be integrated on the
application level. We will discuss object storage services in detail in our next lesson.</p>
<h3 id="network">Network<a class="headerlink" href="#network" title="Permanent link">#</a></h3>
<p>The next big topic concerning IaaS services is networks. Before we go into the cloud-aspect let's look at how the 
underlying infrastructure is built. As indicated in the first lecture it is strongly recommended that you 
familiarize yourself with the basics of computer networking, such as the Ethernet, IP and TCP protocols as you will
need them to understand this section.</p>
<h4 id="how_cloud_networks_are_built">How cloud networks are built<a class="headerlink" href="#how_cloud_networks_are_built" title="Permanent link">#</a></h4>
<p>So, let's get started. Imagine a data center from the first lecture. Your task is to build an IaaS cloud provider.
You put your servers that will serve as your hosts for virtual machines in the racks. These servers will be connected
to the Top-of-Rack switches (yes, two for redundancy) using 10 GBit/s network cables. The switches are themselves
connected among each other and across racks with several 100 GBit/s.</p>
<p>Now comes the tricky part: how do you create private networks for each customer? One option would be to use 
<a href="https://en.wikipedia.org/wiki/IEEE_802.1Q">802.11Q</a> VLAN tags separating each network from each other. However, that
limits you to 2<sup>12</sup> = 4096 private networks. That may seem like much but for a public cloud provider that is
not sufficient. Therefore, public cloud providers use overlay protocols like
<a href="https://en.wikipedia.org/wiki/Virtual_Extensible_LAN">VXLAN</a> to work around this problem.</p>
<p>We describe this not for you to learn but to highlight that public cloud networks are <em>complex</em>. A cloud provider
cannot guarantee a fixed bandwidth between two virtual machines (unless they are put on the same physical server using
affinity groups). This is one of the reasons that often the ideal setup for cloud architectures is one that uses
multiple, medium-sized instances rather than few large sized ones.</p>
<h4 id="underlying_network_architectures_offered_by_cloud_providers">Underlying network architectures offered by cloud providers<a class="headerlink" href="#underlying_network_architectures_offered_by_cloud_providers" title="Permanent link">#</a></h4>
<p>When we look at the network offerings by cloud providers there are three types:</p>
<ol>
<li>Virtual machines receive private IP addresses and a gateway or load balancer handles the public-to-private IP
   translations. This is the case with the larger cloud providers such as <a href="https://aws.amazon.com">AWS</a>,
   <a href="https://azure.microsoft.com/en-us/">Azure</a> and <a href="https://cloud.google.com/">GCP</a> at the time of writing.</li>
<li>Virtual machines have one public IP address on the first network interface and additional private networks
   can be attached as new, separate network interfaces. This is the case with most smaller IaaS providers such as
   <a href="https://www.digitalocean.com/">DigitalOcean</a>, <a href="https://www.hetzner.de/">Hetzner</a>, <a href="https://upcloud.com/">Upcloud</a>,
   or <a href="https://www.exoscale.com/">Exoscale</a>.</li>
<li>Fully dynamic network configuration that allows the customer to define their network setup and IP assignment
   dynamically. This is typically offered by IaaS providers that target enterprise customers who wish to migrate their
   classic on-premises infrastructure and require the flexibility they had when using their own hardware. This is the
   case with <a href="https://www.ionos.com/">1&amp;1 IONOS</a>.</li>
</ol>
<p>TODO: Vultr? Linode? Deutsche Telekom Cloud? Alibaba Cloud?</p>
<p>TODO: add illustration</p>
<p>Out of group 2 it is worth mentioning that the services that are available on the public network
(firewalls, load balancers) are often not available on private networks. </p>
<h4 id="firewalling">Firewalling<a class="headerlink" href="#firewalling" title="Permanent link">#</a></h4>
<p>IaaS providers often also offer network firewalls as a service, included in the platform. Firewalls generally have
two rule types: INGRESS (from the Internet or other machines to the current VM) and EGRESS (from the current VM to
everywhere else).</p>
<p>Firewall providers often employ the concept of <em>security groups</em>. The implementation varies greatly, but in general
security groups are a reusable set of rules that can be applied to a VM.</p>
<p>For most cloud providers you will need to create an explicit rule allowing traffic to flow between two machines
in the same security group.</p>
<p>The advantage of security groups is that the rules can be made in such a way that they reference other security
groups rather than specific IP addresses. For example, the <code>database</code> security group could be set to allow connections
only from the <code>appserver</code> security group but not from anywhere else. This can help with the dynamic nature of the cloud
since you do not need to hard-code the IP addresses of the application servers.</p>
<p>TODO: add screenshot of security group configuration</p>
<h4 id="network_load_balancers">Network load balancers<a class="headerlink" href="#network_load_balancers" title="Permanent link">#</a></h4>
<p>Network load balancers are an option some cloud providers offer. In contrast to Application Load Balancers they
do not offer protocol decoding (such as routing requests to backends based on the requested web address), they only
balance incoming connections to a pool of backends.</p>
<p>TODO add illustration</p>
<p>Depending on the cloud provider in question network load balancers may or may not offer terminating encrypted 
connections (SSL/TLS), and may be bound to virtual machine pools. It is also cloud provider specific if load balancers
are offered in private networks or not.</p>
<p>When designing an architecture it is worth considering if the real IP address of the connecting client will be needed.
If the backend needs to know the real IP address of the client and the network load balancer handles SSL/TLS termination
that combination may not be suitable for the task unless a specific trick such as the
<a href="https://www.digitalocean.com/blog/load-balancers-now-support-proxy-protocol/">proxy protocol from Digital Ocean</a>.
Network load balancers without SSL/TLS termination should, in general, make the client IP available to the backends.</p>
<p>When talking about load balancers an interesting question is the load balancing strategy. Most load balancers support
either round robin (selecting the next backend in the list) or source hashing (routing the same connecting IP to the
same backend). Most load balancers also support health checks to take backends that are not able to serve traffic out
of the rotation.</p>
<h4 id="vpns_private_interconnects_and_routing_services">VPNs, private interconnects, and routing services<a class="headerlink" href="#vpns_private_interconnects_and_routing_services" title="Permanent link">#</a></h4>
<h4 id="dns">DNS<a class="headerlink" href="#dns" title="Permanent link">#</a></h4>
<h3 id="monitoring">Monitoring<a class="headerlink" href="#monitoring" title="Permanent link">#</a></h3>
<h3 id="automation_1">Automation<a class="headerlink" href="#automation_1" title="Permanent link">#</a></h3>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../2-capabilities/" rel="prev" title="2. Cloud capabilities">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                2. Cloud capabilities
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../4-xaas/" rel="next" title="4. Beyond IaaS: PaaS, SaaS">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                4. Beyond IaaS: PaaS, SaaS
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 Janos Pasztor, Peter Wenzl, Günther Pospischil
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
<script src="../../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
<script src="../../player.js"></script>
<script src="../../external.js"></script>
<script src="../../download.js"></script>
</body>
</html>