
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="description"/>
<link href="../../favicon.svg" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-6.0.1" name="generator"/>
<title>5. Grafana - Cloud Computing 2020</title>
<link href="../../assets/stylesheets/main.38780c08.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.3f72e892.min.css" rel="stylesheet"/>
<link href="../../custom.css" rel="stylesheet"/>
<meta content="website" property="og:type">
<meta content="Cloud Computing 2020" name="title" property="og:title">
<meta content="Cloud Computing 2020" property="og:site_name ">
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="description" property="og:description">
<meta content="None" property="og:url"/>
<meta content="social.png" name="image" property="og:image"/>
<meta content="Janos Pasztor, Peter Wenzl, GÃ¼nther Pospischil" name="author"/>
<meta content="summary_large_image" name="twitter:card">
<meta content="Cloud Computing 2020 | Cloud Computing 2020" name="twitter:title"/>
<meta content="Course material for the Cloud Computing course of Fall 2020 at the FH Campus Wien. This course goes through the theory and practice of implementing applications for the cloud." name="twitter:description"/>
<meta content="social.png" name="twitter:image"/>
<meta content="2020-09-14" name="date"/>
</meta></meta></meta></meta></meta></head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#running_grafana">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Cloud Computing 2020" class="md-header-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Cloud Computing 2020
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              5. Grafana
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          About the course
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../lectures/">
          Lectures
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../">
          Exercises
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../glossary/">
          Glossary
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Cloud Computing 2020" class="md-nav__button md-logo" href="../.." title="Cloud Computing 2020">
<img alt="logo" src="../../logo-wide.svg"/>
</a>
    Cloud Computing 2020
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/fh-cloud-computing/website/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      About the course
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="About the course" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-1">
<span class="md-nav__icon md-icon"></span>
        About the course
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../grading/" title="Grading">
      Grading
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../projectwork/" title="Project work">
      Project work
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deadlines/" title="Deadlines">
      Deadlines
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../testing/" title="Testing">
      Testing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../help/" title="Getting help">
      Getting help
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Lectures
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Lectures" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon"></span>
        Lectures
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/1-cloud-intro/" title="1. Introduction to the Cloud">
      1. Introduction to the Cloud
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/2-iaas/" title="2. Infrastructure as a Service">
      2. Infrastructure as a Service
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/3-xaas/" title="3. Beyond IaaS">
      3. Beyond IaaS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/4-containers/" title="4. Containers">
      4. Containers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../lectures/5-cloud-native/" title="5. Cloud-native software development">
      5. Cloud-native software development
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Exercises
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Exercises" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../1-iaas/" title="1. IaaS">
      1. IaaS
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../2-terraform/" title="2. Terraform">
      2. Terraform
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../3-containers/" title="3. Containers">
      3. Containers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../4-prometheus/" title="4. Prometheus">
      4. Prometheus
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        5. Grafana
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="5. Grafana">
      5. Grafana
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#running_grafana">
    Running Grafana
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting_up_grafana_with_prometheus">
    Setting up Grafana with Prometheus
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating_a_cpu_graph">
    Creating a CPU graph
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating_an_alert">
    Creating an alert
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting_up_a_notification_channel">
    Setting up a notification channel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploying_grafana_in_an_automated_fashion">
    Deploying Grafana in an automated fashion
  </a>
<nav aria-label="Deploying Grafana in an automated fashion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_data_sources">
    Provisioning data sources
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_a_notification_channel">
    Provisioning a notification channel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_dashboards">
    Provisioning dashboards
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../6-api-integration/" title="6. API integration">
      6. API integration
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Glossary
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Glossary" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon"></span>
        Glossary
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../glossary/" title="A-Z">
      A-Z
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#running_grafana">
    Running Grafana
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting_up_grafana_with_prometheus">
    Setting up Grafana with Prometheus
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating_a_cpu_graph">
    Creating a CPU graph
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#creating_an_alert">
    Creating an alert
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setting_up_a_notification_channel">
    Setting up a notification channel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deploying_grafana_in_an_automated_fashion">
    Deploying Grafana in an automated fashion
  </a>
<nav aria-label="Deploying Grafana in an automated fashion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_data_sources">
    Provisioning data sources
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_a_notification_channel">
    Provisioning a notification channel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provisioning_dashboards">
    Provisioning dashboards
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/fh-cloud-computing/website/edit/master/docs/exercises/5-grafana/index.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<div class="download"><a download href="index.pdf"><button>Download PDF ð¨ï¸</button></a>
</div>
<h1>Grafana</h1>
<p><a href="https://grafana.com/">Grafana</a> is a common way to visualize information from multiple source systems, including <a href="/exercises/4-prometheus">Prometheus</a>. It offers a user friendly way to create graphs, alters, and display metrics.</p>
<h3 id="running_grafana">Running Grafana<a class="headerlink" href="#running_grafana" title="Permanent link">#</a></h3>
<p>Like Prometheus before, Grafana can be run in a container:</p>
<div class="highlight"><pre><span></span><code>docker run -d \
  -p 3000:3000 \
  grafana/grafana
</code></pre></div>
<p>This will launch Grafana on port 3000 of your node.</p>
<h3 id="setting_up_grafana_with_prometheus">Setting up Grafana with Prometheus<a class="headerlink" href="#setting_up_grafana_with_prometheus" title="Permanent link">#</a></h3>
<p>Grafana is an aggregator for information from many different systems. Data sources can be configured in the Configuration â Data sources menu on the left side. When adding a Prometheus data source you simply have to provide Grafana with your Prometheus URL. If you did not deploy any additional changes in the previous exercise you can leave everything else on default settings.</p>
<p><img alt="A screenshot of the Prometheus data source. The URL field contains the value of http://prometheus:9090" src="prometheus-datasource.png"/></p>
<h3 id="creating_a_cpu_graph">Creating a CPU graph<a class="headerlink" href="#creating_a_cpu_graph" title="Permanent link">#</a></h3>
<p>Once you have the data source set up you can create a new dashboard and add a panel. The panel can have different visualization types, but will always draw its data from a query in the bottom box. Make sure to select the Prometheus data source and you will be presented with an option to enter your PromQL query. In addition, you can also provide sophisticated legend information, such as `` to list the instance name.</p>
<p><img alt="A screenshot of the Grafana panel adjustment screen. It features a graph, as well as a PromQL input from the previous lecture." src="panel.png"/></p>
<p>On the right hand side you can adjust various display options, for example what range and display format the Axis' should have in the graph.</p>
<h3 id="creating_an_alert">Creating an alert<a class="headerlink" href="#creating_an_alert" title="Permanent link">#</a></h3>
<p>In the same interface as above you can create an alert. The alert will allow you to set an evaluation period to determine how often the rule is evaluated. You can also set the <code>For</code> field to allow a grace period before the alert triggers. The conditions give you a way to create a flexible set of rules when an alert should be triggered.</p>
<p><img alt="A screenshot of the alert configuration panel." src="alerts.png"/></p>
<p>You can also set up notifications to send the alert to various notification channels. This functionality can be used to trigger the scaling behavior required in the project work.</p>
<h3 id="setting_up_a_notification_channel">Setting up a notification channel<a class="headerlink" href="#setting_up_a_notification_channel" title="Permanent link">#</a></h3>
<p>Before you can set up an alert notification you have to create a notification channel. This can be done from the left hand menu by going to Alerting â Notification channels. For the purposes of the project work the notification type should be "webhook". The URL should point to your custom web server that triggers Exoscale to increase the instance pool size. Finally, you should also set up the "Send reminders" option to keep triggering the scale up/down behavior if the CPU usage is still high/low.</p>
<p><img alt="A screenshot of the notification channel configuration interface. The Disable Resolve Message and Send Reminders options are on. The Url points to http://autoscaler:8090/up ." src="notification.png"/></p>
<h3 id="deploying_grafana_in_an_automated_fashion">Deploying Grafana in an automated fashion<a class="headerlink" href="#deploying_grafana_in_an_automated_fashion" title="Permanent link">#</a></h3>
<p>Since our project work revolves around Terraform we need a way to deploy Grafana with all settings in an automated fashion. Thankfully, the Grafana developers have thought of this and <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/">provided us with a way to do that</a>.</p>
<h4 id="provisioning_data_sources">Provisioning data sources<a class="headerlink" href="#provisioning_data_sources" title="Permanent link">#</a></h4>
<p>To provision data sources we must place or mount the data source configuration file in the <code>/etc/grafana/provisioning/datasources/</code> directory inside the Grafana container in YAML format. For Prometheus this data source could look like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">datasources</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Prometheus</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">prometheus</span>
  <span class="nt">access</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">proxy</span>
  <span class="nt">orgId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://prometheus:9090</span>
  <span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">editable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<h4 id="provisioning_a_notification_channel">Provisioning a notification channel<a class="headerlink" href="#provisioning_a_notification_channel" title="Permanent link">#</a></h4>
<p>Notification channels can also be provisioned by placing the appropriate YAML file in <code>/etc/grafana/provisioning/notifiers/</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">notifiers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Scale up</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">webhook</span>
    <span class="nt">uid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">scale-up</span>
    <span class="nt">org_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">is_default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">send_reminder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">disable_resolve_message</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">frequency</span><span class="p">:</span> <span class="s">"2m"</span>
    <span class="nt">settings</span><span class="p">:</span>
      <span class="nt">autoResolve</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">httpMethod</span><span class="p">:</span> <span class="s">"POST"</span>
      <span class="nt">severity</span><span class="p">:</span> <span class="s">"critical"</span>
      <span class="nt">uploadImage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
      <span class="nt">url</span><span class="p">:</span> <span class="s">"http://autoscaler:8090/up"</span>
</code></pre></div>
<p>Note, that the <code>uid</code> field of the notifier matters as this will be referenced from the dashboard.</p>
<h4 id="provisioning_dashboards">Provisioning dashboards<a class="headerlink" href="#provisioning_dashboards" title="Permanent link">#</a></h4>
<p>Provisioning dashboards is slightly more complex. As a first step we must tell Grafana to look in a certain directory for the dashboard configuration file. Grafana will periodically check this directory. This can be done from a YAML file in the <code>/etc/grafana/provisioning/dashboards/</code> directory:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="nt">providers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">'Home'</span>
  <span class="nt">orgId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">folder</span><span class="p">:</span> <span class="s">''</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
  <span class="nt">updateIntervalSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
  <span class="nt">options</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/grafana/dashboards</span>
</code></pre></div>
<p>We can then place the dashboard JSON file in the specified directory. The easiest way to create a JSON file is to manually create it in Grafana and then copy the JSON from the Grafana dashboard. Keep in mind that you may have to adjust the JSON manually to match your notification channel <code>uid</code> values.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../4-prometheus/" rel="prev" title="4. Prometheus">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                4. Prometheus
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../6-api-integration/" rel="next" title="6. API integration">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                6. API integration
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright Â© 2020 Janos Pasztor, Peter Wenzl, GÃ¼nther Pospischil
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.77e55a48.min.js"></script>
<script src="../../assets/javascripts/bundle.aa3f9871.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
<script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
<script src="../../player.js"></script>
<script src="../../external.js"></script>
<script src="../../download.js"></script>
</body>
</html>